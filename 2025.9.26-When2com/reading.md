参考：[2020 When2com: Multi-Agent Perception via Communication Graph Grouping - 知乎](https://zhuanlan.zhihu.com/p/590351426)



这篇论文提出了 **When2com**（When to Communicate），这是一个用于多智能体协作感知的通信框架，主要旨在解决带宽限制和通信效率问题。



### 1. 研究背景与动机
* **多智能体感知的优势**：相比单智能体，多智能体系统（如无人机群、机器人群）能提供更好的环境覆盖率，并对故障具有更强的鲁棒性。
* **主要挑战**：现有的多智能体通信方法通常采用**广播**或**全连接**的方式。这导致带宽消耗巨大，通信复杂度随智能体数量呈 $O(N^2)$ 增长，且难以扩展到大规模系统。
* **核心痛点**：并非所有信息都是必要的。当智能体自身的局部观测已经足够，或者接收到的信息包含噪声、无关时，盲目的通信不仅浪费带宽，甚至可能因引入劣质信息而降低感知性能。



### 2. 核心方法：When2com
作者提出了一个统一的通信框架，该框架能够学习**构建通信组（即决定与谁通信）**以及**决定何时通信**。



#### 2.1 握手通信机制 (Handshake Communication)
该模型不使用全连接通信，而是采用类似于“握手”的机制来修剪无关的连接，过程主要分为三个阶段：
1.  **请求 (Request)**：智能体 $i$ 将其局部观测 $x_i$ 压缩为一个极小的**查询向量 (Query)** $\mu_i$ 和一个较大的**键向量 (Key)** $\kappa_i$ ，具体见公式1。
2.  **匹配 (Match)**：
    * **决定与谁通信 (Who)**：计算智能体 $i$ 的 Query 与其他智能体 $j$ 的 Key 之间的相似度 $m_{i,j}$，具体见公式2（通用注意力）。如果匹配分数高，说明智能体 $j$ 能提供有用的信息。
    * **决定何时通信 (When)**：计算智能体自身的 Query 与自身的 Key 的相似度 $m_{i,i}$。如果自身匹配分数高，说明自身信息已足够，无需进行外部通信。
3.  **选择 (Select)**：利用前面计算的相似度，修剪掉低分数的连接，构建稀疏的通信图。
    - **通信图 $\bar{M}$ **：将相似度 $m_{i,j}$ 全部结果收集，取softmax，构造出匹配矩阵 $M$ (具体见公式5)，最后取一个阈值 $\delta$ ，$M$ 小于这个阈值 $\delta$ 的元素都置为0，得到新矩阵 $\bar{M}$ ，所得矩阵 $\bar{M}$ 可视为有向图的邻接矩阵，其元素表示何时通信，元素为零表示不与之通信。（可以看图4，很好理解）




#### 2.2 非对称消息传递 (Asymmetric Message)
* 为了最大限度地节省带宽，模型采用了**非对称**策略：用于广播请求的 Query 向量被压缩得非常小，而保留在本地的 Key 向量较大。
* 只有在确认连接建立后，支持者（Supporter）才会发送详细的特征信息给请求者（Requester），发送权重基于相似度（见公式7），这种非对称设计显著降低了整体的通信带宽消耗。



#### 2.3 学习策略

* 采用**集中式训练，分布式推理**的策略。
* **无需显式通信标签**：模型不需要关于“应该与谁通信”的真值标签（Ground Truth），而是通过下游感知任务（如语义分割的掩码、图像分类标签）的损失函数进行端到端的训练 。



### 3. 实验与结果

作者在两个不同的感知任务上验证了模型的泛化能力：



#### 3.1 任务与数据集

* **协作语义分割**：作者构建了一个新的数据集 **AirSim-MAP**。该数据集包含多架无人机在模拟环境中飞行的深度图、姿态、RGB 图像以及语义分割掩码。
* **多视角 3D 形状识别**：基于 ModelNet40 数据集构建的多智能体变体，模拟了部分智能体视角受损的情况。



#### 3.2 主要结果

* **带宽效率**：When2com 在保持优越性能的同时显著降低了通信带宽。例如，在单请求多支持（SRMS）任务中，When2com 的带宽消耗仅为 0.98 MBpf，而对比方法 Who2com 为 2.0 MBpf 。
* **性能提升**：
    * 相比于不通信（NoCom）和随机通信（RandCom），When2com 的性能有显著提升。
    * 相比于全连接方法（如 TarMac），When2com 在带宽仅为前者 1/8 的情况下，达到了具有竞争力的精度 。
* **抗干扰能力**：当存在噪声或观测受损时，全连接方法（如 CatAll）因为融合了噪声数据，表现甚至不如不通信；而 When2com 能够有效避免选择有害的噪声信息



### 4. 结论

When2com 提供了一个通用且带宽高效的框架，成功实现了在分布式环境中动态构建通信组和决定通信时机，适用于多种协作感知任务。



### 一句话总结

When2com 通过**握手式分组通信 + 非对称注意力机制**，在多智能体感知中实现了**动态组网与通信决策**，显著降低带宽而保持甚至提升感知性能。
